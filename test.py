"""

Demonstrates a dynamic Layout

"""

from datetime import datetime

from time import sleep

from rich.align import Align
from rich.console import Console
from rich.layout import Layout
from rich.live import Live
from rich.text import Text
from rich.panel import Panel
from rich.table import Table
from config.commands import menu
from config.colours import banner

console = Console()
layout = Layout()

layout.split(
    Layout(name="header", size=1),
    Layout(ratio=1, name="main"),
    Layout(size=10, name="footer"),
)

layout["main"].split_row(Layout(name="side"), Layout(name="body", ratio=2))

layout["side"].split(
    Layout(
        Align.center(
            Text(
                "Bottom",
                justify="center",
            ),
            vertical="middle",
        ),
    ),
    Layout(
        Align.center(
            Text(
                "Bottom",
                justify="center",
            ),
            vertical="middle",
        ),
    )
)

layout["body"].update(
    Align.center(
        # menu(),
        Text("Menu placeholder"),
        vertical="middle",
    )
)


class Header:
    """Display header with clock."""

    def __rich__(self) -> Panel:
        grid = Table.grid(expand=True)
        grid.add_column(justify="center", ratio=1)
        grid.add_column(justify="right")
        grid.add_row(
            "[b]Rich[/b] Layout application",
            datetime.now().ctime().replace(":", "[blink]:[/]"),
        )
        return Panel(grid, style="white on blue")


layout["header"].update(Header())
layout["body"].update(banner())

with Live(layout, screen=True, redirect_stderr=False) as live:
    try:
        while True:
            sleep(1)
    except KeyboardInterrupt:
        pass
